<!doctype html>
<html>
    <head>
        <title>Score Following</title> 
        <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"> 
        <link rel="stylesheet" href="score-following.css" />
        <link rel="stylesheet" href="diva.js/build/css/diva.min.css" />
        <link rel="stylesheet" href="meix.js/css/meiEditor.css">

        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.js"></script>
        <script src="audio.js"></script>
        <script src="mei.js"></script>
        <script src="diva.js/build/js/diva.min.js"></script>  
        <script src="meix.js/js/lib/require.js"></script>
        <script src="meix.js/js/local/meiEditorPreloader.js"></script>
        <script>
            var meiEditor;
            var waveformAudioPlayer;
            var divaData;

            var divaSettings ={
                enableAutoHeight: true,
                fixedHeightGrid: false,
                iipServerURL: "http://localhost/fcgi-bin/iipsrv.fcgi",
                objectData: "/holst2Tiff.json",
                imageDir: "/srv/images/holst2Tiff/",
                enableAutoscroll: true,
                disableAutoscrollPrefs: true,
                disableManualScroll: true,
                enableCanvas: true,
                enableDownload: true,
                enableHighlight: true,
                enableAutoTitle: false,
                verticallyOriented: false
            };

            var element = "#mei";
            var meixSettings = 
            {
                'meiEditorLocation': '/meix.js/',
                'divaInstance': divaData,
                'jsonFileLocation': '/holst1Tiff.json',
                'oneToOneMEI': false,
                'skipXMLValidator': true,
                'initializeWithFile': '/testMEI.xml'
            };
            var plugins = ["meix.js/js/local/plugins/meiEditorZoneDisplay.js"];

            $(document).ready(function() {
                $('#diva').diva(divaSettings);

                divaData = $("#diva").data('diva');
                meixSettings.divaInstance = divaData;

                $('#waveform').wap({}); 
                waveformAudioPlayer = $("#waveform").data('wap');

                meiEditor = new MeiEditor(element, meixSettings, plugins);
                $(window).on('meiEditorLoaded', function(){
                    meiEditor = $("#mei").data('AceMeiEditor');
                    initializeMEI();
                });
            });
        </script>
    </head> 

    <body>
        <div id="diva"></div>
        <div id="mei"></div>
        <div id="waveform"></div>
    </body>
    <script>
    </script>
</html>